{% extends 'dashboard/base.html' %}
{% load static %}
{% block heading %}
    Dashboard
{% endblock %}

{% block path %}
    Dashboard
{% endblock %}

{% block body %}

    {% if request.user.is_staff %}
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4"style="background-color: #007bff3b; border-color: #007bff">
                <div class="card-body">Total Routes</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{total_routes}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #ffe8195e; border-color: #ffe819">
                <div class="card-body">Total Buses</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{total_buses}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #dc354554; border-color: #dc3545">
                <div class="card-body">Total Stops</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{total_stops}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #28a7453b; border-color: #28a745">
                <div class="card-body">Today's Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{today_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin-top: 50px">
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #ff00dd3b; border-color: #ff00dd">
                <div class="card-body">Total Users</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{total_users}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #009e423b; border-color: #009e42">
                <div class="card-body">Passengers</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{passengers}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #ff99003b; border-color: #ff9900">
                <div class="card-body">Staff</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{staff}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card  mb-4" style="background-color: #8a09b13b; border-color: #8a09b1">
                <div class="card-body">Total Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link">{{total_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="card mb-4" style="background-color: #007bff3b; border-color: #007bff">
                <div class="card-body">Total Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small stretched-link" id="total_bookings">{{total_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card mb-4" style="background-color: #dc354554; border-color: #dc3545">
                <div class="card-body">Cancelled Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link" id="cancelled_bookings">{{cancelled_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card mb-4" style="background-color: #28a7453b; border-color: #28a745">
                <div class="card-body">Successfull Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link" id="successful_bookings">{{successful_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card mb-4" style="background-color: #ffe8195e; border-color: #ffe819">
                <div class="card-body">Upcoming Bookings</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <p class="small  stretched-link" id="upcoming_bookings">{{upcoming_bookings}}</p>
                    <!-- <div class="small "><i class="fas fa-angle-right"></i></div> -->
                </div>
            </div>
        </div>
    </div>
    {% endif %}

{% if request.user.is_staff %}

{% else %}

<div class="row">
    <div class="col-xl-8 col-md-3">
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-chart-pie mr-1"></i>
            Booking Stats
        </div>
        <div class="card-body"><canvas id="myPieChart" width="100%" height="50"></canvas></div>
        <!-- <div class="card-footer small text-muted"></div> -->
    </div>
    </div>
</div>

{% endif %}



{% endblock %}

{% block directly_in_main %}
<!-- <script src="{% static 'dashboard/src/js/scripts.js' %}"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>

<script src="{% static 'dashboard/js/charts.js' %}"></script>
{% endblock %}